{% extends 'base.html' %}
{% block title %}
Dashboard
{% endblock %}
{% block content %}

<!-- Chart JS -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js'></script>
<link rel="stylesheet" href="{{ url_for('exercises.static', filename='css/exercise_list.css')}}">

<h1>Welcome, {{ current_user.firstname }} </h1>
<h2>You have logged in {{ current_user.consecutive_days }} day(s) in a row!</h2>



<div class="list-container">
    <ul class="list">
        {% for exercise in exercises %}
        {% if exercise.id in showFavAdd %}
        <li class="plate">
            <section class="upper">
                <label for={{ exercise.id }} class="name">
                    <a class="name" href="{{ url_for('exercises.get_exercise_id', exid=exercise.id) }}"
                        target="_blank">{{ exercise.exercise_name }}</a>
                </label>
                {% endif %}
                <span id="favorite-button">
                    {% if exercise.id in showFavAdd %}
                    <form method="post">
                        <input name="exercise_id" class="invs" type="hidden" value="{{ exercise.id }}"> </input>
                        <input name="user_id" class="invs" type="hidden" value="{{ current_user.id }}"> </input>
                        <button type="submit" name="favoriteButtonRemove" class="button--red">ðŸ–¤</button>
                    </form>
                    {% endif %}
                </span>
            </section>
            {% if exercise.id in showFavAdd %}
            <p class="description">
                {{ exercise.exercise_description }}
            </p>
            {% endif %}
        </li>
        {% endfor %}
    </ul>

    <script src="{{ url_for('exercises.static', filename='js/expand_list_element.js') }}"></script>
</div>


<div class="chart">
    <canvas id="line"></canvas>
    <canvas id="bar"></canvas>
</div>


<script>
    var ctx = document.getElementById("line").getContext("2d");
    var histogram = new Chart(ctx,
    {
        type: 'line',
        data:
            {
            labels: {{ xData | tojson }},
            datasets:
                [{
                    label: "Number of Exercises completed",
                    data: {{ yData | tojson }},
                    fill: false,
                    lineTension: 0.1
                }]
            },
        options:
            {
                responsive: true,
                scales:
                    {
                        yAxes: [{ticks: {beginAtZero: true}}],
                        x: [{type: 'time',time: {unit: 'day',tooltipFormat: 'MMM DD'}}],
                    }
            }
    });


        var ctx = document.getElementById("bar").getContext("2d");
    var histogram = new Chart(ctx,
    {
        type: 'bar',
        data:
            {
            labels: {{ xData | tojson }},
            datasets:
                [{
                    label: "Number of Exercises completed",
                    data: {{ yData | tojson }},
                    fill: false,
                    lineTension: 0.1
                }]
            },
        options:
            {
                responsive: true,
                scales:
                    {
                        yAxes: [{ticks: {beginAtZero: true}}],
                        x: [{type: 'time',time: {unit: 'day',tooltipFormat: 'MMM DD'}}],
                    }
            }
    });
</script>


{% endblock %}
