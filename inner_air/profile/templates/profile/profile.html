{% extends 'base.html' %}
{% block title %}
Dashboard
{% endblock %}
{% block content %}

<!-- Chart JS -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js'></script>


<h1>Welcome, {{ current_user.firstname }} </h1>
<h2>You have logged in {{ current_user.consecutive_days }} day(s) in a row!</h2>

<h2 class="text-center">Exercises</h2>
<table class="table table-hover table-dark">
    <thead>
        <tr>
            <th scope="col">Favorite Exercise Names</th>
            <th scope="col">Remove From Favorites</th>
        </tr>
    </thead>
    <tbody>
        {% for exercise in exercises %}
        {% if exercise.id in showFavAdd %}
        <tr>
            <td><label for={{ exercise.id }} class="name">
                    <a class="name" href="{{ url_for('exercises.get_exercise_id', exid=exercise.id) }}"
                        target="_blank">{{ exercise.exercise_name }}</td>
            <td>
                {% endif %}
                {% if exercise.id in showFavAdd %}
                <form method="post">
                    <input name="exercise_id" class="invs" type="hidden" value="{{ exercise.id }}"> </input>
                    <input name="user_id" class="invs" type="hidden" value="{{ current_user.id }}"> </input>
                    <button type="submit" name="favoriteButtonRemove" class="button--red">ðŸ–¤</button>
                </form>
                {% endif %}

            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>


<canvas id="histogram" class="chart"></canvas>

<script>
    var ctx = document.getElementById("histogram").getContext("2d");
    var histogram = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: {{ xData | tojson }},
    datasets: [
        {
            label: "Number of Exercises completed",
            data: {{ yData | tojson }},
        fill: false,
        lineTension: 0.1
      }
    ]
  },
    options:
    {
        responsive: true,
            scales:
        {
            x:
            {
                type: 'time',
        }
        }
    }
});
</script>


{% endblock %}
