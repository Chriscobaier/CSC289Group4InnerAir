{% extends 'base.html' %}
{% block title %}
Exercises
{% endblock %}
{% block content %}

<link rel="stylesheet" href="{{ url_for('exercises.static', filename='css/exercise_list.css')}}">
<script src="https://kit.fontawesome.com/b7aaa916a8.js" crossorigin="anonymous"></script>
<script src="{{ url_for('exercises.static', filename='js/heart_button.js') }}"></script>


<h1>Welcome, {{ current_user.firstname }} </h1>

<div class="list-container">
    <ul class="list">
        {% for exercise in exercises %}
        <li class="plate">
            <section class="upper">
                <label for={{ exercise.id }} class="name">
                    <a href="{{ url_for('exercises.get_exercise_id', exid=exercise.id) }}" target="_blank">{{ exercise.exercise_name }}</a>
                </label>
                <span id="favorite-button">
                    {% if exercise.id not in showFavAdd %}
                    <form method="post">
                        <input name="exercise_id" class="invs" type="hidden" value="{{ exercise.id }}"> </input>
                        <input name="user_id" class="invs" type="hidden" value="{{ current_user.id }}"> </input>
                        <button id="btn1" name="favoriteButton" class="heartBtn"><i class="fa-solid fa-heart"></i></button>
                    </form>
                    {% endif %}
                    {% if exercise.id in showFavAdd %}
                    <form method="post">
                        <input name="exercise_id" class="invs" type="hidden" value="{{ exercise.id }}"> </input>
                        <input name="user_id" class="invs" type="hidden" value="{{ current_user.id }}"> </input>
                        <button id="btn2" name="favoriteButtonRemove" class="heartBtn"><i class="fa-solid fa-heart"></i></button>
                    </form>
                    {% endif %}
                </span>
            </section>

            <p class="description">
                {{ exercise.exercise_description }}
            </p>
        </li>
        {% endfor %}
    </ul>

    <h2 class="text-center">Favorites</h2>
        <table class="table table-hover table-dark">
            <!-- Favorites Model -->
            <thead>
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">User ID</th>
                    <th scope="col">Exercise ID</th>
                </tr>
            </thead>
            <tbody>
                {% for favorite in favorites %}
                <tr>
                    <td>{{ favorite.id }}</td>
                    <td>{{ favorite.user_id }}</td>
                    <td>{{ favorite.exercise_id }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    <script src="{{ url_for('exercises.static', filename='js/expand_list_element.js') }}"></script>
</div>
{% endblock %}
